trigger:
  branches:
    include:
    - master
    - release/*
    - feature/*
  tags:
    include:
      - '*'
  paths:
    include:
    - build/*
    - charts/matchmaker/*
    - src/MatchMaker/*
    - Directory.Build.props

pr:
  branches:
    include:
    - master
    - release/*
    - feature/*

pool:
  vmImage: 'ubuntu-latest'

steps:
- bash: |
    echo "##vso[build.updatebuildnumber]$(git describe --tags)"

- template: ${{variables['System.DefaultWorkingDirectory']}}/build/templates/docker-build.yml
  parameters:
    repository: 'rynowak.azurecr.io/rochambot'
    image: 'matchmaker'
    context: 'src/MatchMaker'
    serviceConnection: rynowak.azurecr.io
